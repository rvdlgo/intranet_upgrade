var WebmanagerFormStateRegistry={},FormsUtil=function(){function k(e,d,a,c){d=document.getElementById("precondition_"+c.replace("wmform_","")+"_"+d);if("undefined"!==typeof d){c=d.value.split(",");if("add"==a)l(c,e)||c.push(e);else if(l(c,e))for(a=0;a<c.length;a++)if(c[a]==e){c.splice(a,1);break}d.value=c.join(",")}}function l(e,d){for(var a=0;a<e.length;a++)if(e[a]==d)return!0;return!1}function m(e,d){if("undefined"!==typeof e&&null!=e&&"undefined"!==typeof d&&null!==d){var a=d.indexOf(".");return-1==
a?e[d]:m(e[d.substring(0,a)],d.substring(a+1,d.length))}return null}function b(e,d,a){var c=[],g;for(g in e)if(null!=e&&null!=e[g]){var h=e[g];"function"==typeof h.checkConditions&&h.checkConditions()&&(h.visible?(k(d+g,"show","add",a),k(d+g,"hide","remove",a),c.push({value:"show",identifier:d+g})):(k(d+g,"hide","add",a),k(d+g,"show","remove",a),c.push({value:"hide",identifier:d+g})));if("object"==typeof h&&h.visible)for(h=b(h,d+g+".",a),i=0;i<h.length;i++)c.push(h[i])}return c}return{checkConditions:b,
getObject:m,contains:l,join:function(e,d){var a="",c;for(c in e)""!=a&&(a+=d),a+=e[c];return a},isIE:function(){return-1!=navigator.appVersion.indexOf("MSIE")?!0:!1},normalize:function(e){return e.replace(/\./g,"_")}}}(),FormValidation=function(){function k(b,e,d,a){var c=b.parents("form:first").attr("id"),g=WebmanagerFormStateRegistry[c].currentStep(),h=b.attr("name"),f=FormsUtil.getObject(g,h),h=!1,n=m(b),q=!1;null===f||"undefined"===typeof f||f.value===n&&"undefined"!=typeof f.value&&""!==f.value&&
"undefined"!==typeof n&&""!==n||(q=!0,f.value=n,f.validated=!1,e&&(h=l(b,f)));if(null!=f&&(d||q))for(b.attr("type"),void 0==a&&(a=[]),b=FormsUtil.checkConditions(g,"",c),e=0;e<b.length;e++)if(changedFragmentObj=FormsUtil.getObject(g,b[e].identifier),"show"==b[e].value&&$("#"+FormsUtil.normalize(b[e].identifier)).is(":hidden")){$("#"+FormsUtil.normalize(b[e].identifier)).trigger("IAF_ShowFormFragment");var p=!1;"undefined"==typeof changedFragmentObj||changedFragmentObj.condition||(p=changedFragmentObj.condition=
!0);$("#"+FormsUtil.normalize(b[e].identifier)).find(":input").addBack(":input").filter(":visible").each(function(){""!=$(this).attr("name")&&"undefined"!=typeof $(this).attr("name")&&(recursiveChangedFragmentObj=FormsUtil.getObject(g,$(this).attr("name")),void 0!=recursiveChangedFragmentObj&&(recursiveChangedFragmentObj.condition=!0,recursiveChangedFragmentObj.visible=!0,-1==$.inArray($(this).attr("name"),a)&&(a.push($(this).attr("name")),k($(this),!1,!0,a),p=!0)))});if(p)for(newChanges=FormsUtil.checkConditions(g,
"",c),d=0;d<newChanges.length;d++)for(f=e;f<b.length;f++)b[f].identifier==newChanges[d].identifier&&b[f].value!=newChanges[d].value&&(b[f].value=newChanges[d].value)}else if("hide"==b[e].value&&$("#"+FormsUtil.normalize(b[e].identifier)).is(":visible")&&(p=!1,"undefined"!=typeof changedFragmentObj&&changedFragmentObj.condition&&(changedFragmentObj.condition=!1,p=!0),$("#"+FormsUtil.normalize(b[e].identifier)).trigger("IAF_HideFormFragment"),$("#"+FormsUtil.normalize(b[e].identifier)).find(":input").addBack(":input").filter(":hidden").each(function(){""!=
$(this).attr("name")&&"undefined"!=typeof $(this).attr("name")&&(recursiveChangedFragmentObj=FormsUtil.getObject(g,$(this).attr("name")),void 0!=recursiveChangedFragmentObj&&(recursiveChangedFragmentObj.condition=!1,recursiveChangedFragmentObj.visible=!1,-1==$.inArray($(this).attr("name"),a)&&(a.push($(this).attr("name")),k($(this),!1,!0,a),p=!0)))}),p))for(newChanges=FormsUtil.checkConditions(g,"",c),d=0;d<newChanges.length;d++)for(f=e;f<b.length;f++)b[f].identifier==newChanges[d].identifier&&b[f].value!=
newChanges[d].value&&(b[f].value=newChanges[d].value);return h}function l(b,e){var d=b.attr("name"),a=b.parents("form:first").attr("id"),c=!1;null!==e&&"undefined"!==typeof e&&!e.validated&&b.is(":visible")&&(b=e.validate(),e=FormsUtil.join(b,","),c=""!=e,d="error_"+a+"_"+FormsUtil.normalize(d),a=$("#"+d),0<a.length&&(""!=e?a.trigger("IAF_ShowError",[d,b]):a.trigger("IAF_HideError",d)));return c}function m(b){value=b.val();if("radio"==b.attr("type")){var e=b.attr("name"),e=e.replace(/\./g,"\\.");
value=$("input[name\x3d"+e+"]:checked").val()}"checkbox"==b.attr("type")&&(values=$("input:checkbox[name\x3d'"+b.attr("name")+"']:checked")||[],value=[],i=0,values.each(function(){value.push($(this).val());i++}));return value}return{changeFragment:k,submitForm:function(b,e){b.unbind("submit");$(":input",b).each(function(){var d=$(this).attr("name"),a=FormsUtil.getObject(e,d);if(null===a||"undefined"===typeof a||a.visible)null==a||"checkbox"!=this.type&&"radio"!=this.type||void 0!=a.value&&0!=a.value.length||
0!=$(":input[type\x3d'hidden'][name\x3d'"+d+"']",b).length||b.append('\x3cinput type\x3d"hidden" name\x3d"'+d+'" value\x3d"" /\x3e');else switch(this.type){case "password":case "select-multiple":case "select-one":case "text":case "textarea":$(this).val("");break;case "checkbox":case "radio":$(this).removeAttr("checked"),b.append('\x3cinput type\x3d"hidden" name\x3d"'+d+'" value\x3d"" /\x3e')}});b.trigger("IAF_SubmitForm")},validateForm:function(b,e,d){var a=!1,c=$(':input:not(.finalvalidation)[name][type!\x3d"hidden"][type!\x3d"button"][type!\x3d"submit"]',
b);"undefined"!=typeof d&&d&&(c=$(':input.finalvalidation[name][type!\x3d"hidden"][type!\x3d"button"][type!\x3d"submit"]',b));c.each(function(){var d=$(this).attr("name");$(this).attr("type");FormValidation.changeFragment($(this),!0,!1);d=FormsUtil.getObject(e,d);l($(this),d)&&(a=!0)});return a},validateFormFragment:l,getFragmentValue:m}}(),SUBMIT_TIMEOUT=6E4;
$(document).ready(function(k){function l(a){var c=$(a).find(".csfw").val(),g=$(a).find(".csfw_versionId").val(),h=$(a).find(".csfw_stepId").val(),f=$(a).attr("id"),n="true"===$("input[name\x3d'clientsideRouting']",a).val();if("undefined"!==typeof c){var q=1==$(".wmpform").length||n&&""!=h;$.ajax({url:c,async:q,success:function(c){n&&""!==h&&(c+=";\nWebmanagerFormStateRegistry['"+f+"'] \x3d "+f+";");eval(c);var q=WebmanagerFormStateRegistry[f];""!=h?$.getJSON(contextPath+"/wcbservlet/nl.gx.forms.wmpformelement.servlet?formVersionId\x3d"+
g,function(c){var f=!1;$.each(c.steps,function(a,c){f=!0;var d=c.identifier;$.each(c.fragments,function(a,c){"undefined"!==typeof c.name&&(a=FormsUtil.getObject(q[d],c.name),null!==a&&"undefined"!=typeof a&&(null!==c.value&&"undefined"!=typeof c.value&&(a.value=c.value),a.visible=c.visible))})});f?b(a):e(a);d(a)}):d(a)}})}else d(a)}function m(a){$(".generalerrormessage",a).removeClass("displayNone");b(a)}function b(a){a.find(":input:submit").each(function(){$(this).removeAttr("disabled")})}function e(a){a.find(":input:submit").each(function(){$(this).attr("disabled",
"disabled")})}function d(a){a.find(":input").change(function(){FormValidation.changeFragment($(this),!0,!1)});a.submit(function(c){var d=$(this).attr("id"),d=WebmanagerFormStateRegistry[d].currentStep(),b=$("input[name\x3d'clientsideRouting']",this).val(),f=$("input[type\x3d'hidden'][name\x3d'wmback']",this).val();"true"!==b&&f||c.preventDefault();f?(e(a),"true"===b&&FormValidation.submitForm($(this),d)):(c=FormValidation.validateForm($(this),d,!1),c||(c=FormValidation.validateForm($(this),d,!0),
c||(b=$(this).data("actionButton"),"undefined"!==typeof b&&""!==b&&(c=b.closest(".wm-field").attr("id"),"undefined"!==typeof c&&""!==c&&(b=b.attr("data-iaf_action"),"undefined"!==typeof b&&""!==b&&$(a).find(b).val(c)),$(a).removeData("actionButton")),e(a),FormValidation.submitForm($(this),d))))});a.find(".wm_input_back_button").click(function(){$("input[type\x3d'hidden'][name\x3d'wmback']",a).val("true")});$(":input:submit[data-iaf_action],:input:button[data-iaf_action]",a).bind("click",function(c){c.preventDefault();
$(a).data("actionButton",$(this));$(a).trigger("submit")});a.find(":input:radio").click(function(){FormsUtil.isIE&&$(this).change()});var c=[],d=[];a.find(":input").each(function(){var b=a.attr("id"),b=WebmanagerFormStateRegistry[b].currentStep(),e=$(this).attr("name"),g=$(this).attr("type");FormsUtil.contains(d,e)||("hidden"!==g&&d.push(e),b=FormsUtil.getObject(b,$(this).attr("name")),null!==b&&"undefined"!==typeof b&&(b.visible=$(this).is(":visible"),c.push($(this))))});for(var b=0;b<c.length;b++)FormValidation.changeFragment(c[b],
!1,!0);a.trigger("IAF_ClientsideFrameworkLoaded")}$(".wmpform").each(function(){l($(this))});$(document).on("IAF_ShowFormFragment","div",function(){$(this).removeClass("displayNone").show();return!1});$(document).on("IAF_HideFormFragment","div",function(){$(this).hide();return!1});$(document).on("IAF_SubmitForm","form",function(a){a=$("input[name\x3d'clientsideRouting']",this).val();var c=$(this);"true"===a?$(this).ajaxSubmit({dataType:"json",timeout:SUBMIT_TIMEOUT,error:function(a,b,d){b=null;try{b=
a.responseText}catch(n){}null!==b&&0===b.toLowerCase().indexOf("\x3cpre\x3e")?(a=b.substring(5,b.lastIndexOf("}")+1),c.trigger("IAF_AfterSubmit",$.parseJSON(a))):c.trigger("IAF_AfterSubmit")},success:function(a){c.trigger("IAF_AfterSubmit",a)},semantic:!1}):$(this).submit();return!1});$(document).on("IAF_AfterSubmit","form",function(a,c){"undefined"===typeof c||"undefined"!==typeof c.routingResult&&"undefined"!==typeof c.routingResult.httpError?(m($(this)),d($(this))):"undefined"!==typeof c.routingResult?
"0"===c.routingResult.type?document.location.href=c.routingResult.url:$(this).trigger("IAF_AjaxShowFormStep",c.routingResult.step):"undefined"!==typeof c.result?(a=$(":input[name\x3d'wmstepid']:first",$(this)).val(),$(this).trigger("IAF_AjaxShowFormStep",a)):(m($(this)),d($(this)))});$(document).on("IAF_AjaxShowFormStep","form",function(a,c){a=$(this).data("ajax-url");"undefined"!==typeof c&&""!==c&&(a=-1!==a.indexOf("?")?a+"\x26wmstepid\x3d"+c:a+"/wmstepid\x3d"+c);$(this).closest("div.iaf-form-holder-outer").load(a+
" .iaf-form-holder-inner",function(){var a=$(this).find(".wmpform");l($(a))})});$(document).on("IAF_ShowError","div",function(a,c,b){$("#"+c).html('\x3cul class\x3d"wm_formelement_errors"\x3e\x3cli\x3e'+FormsUtil.join(b,"\x3c/li\x3e\x3cli\x3e")+"\x3c/li\x3e\x3c/ul\x3e").addClass("error-message").show();$("#"+c).closest(".fieldgrp").addClass("error")});$(document).on("IAF_HideError","div",function(a,b){$("#"+b).empty().removeClass("error-message").hide();$("#"+b).parents(".fieldgrp").removeClass("error")})});
jQuery(function(k){k.datepicker.regional.nl={closeText:"Sluiten",prevText:"Vorige",nextText:"Volgende",currentText:"Vandaag",monthNames:"januari februari maart april mei juni juli augustus september oktober november december".split(" "),monthNamesShort:"jan feb maa apr mei jun jul aug sep okt nov dec".split(" "),dayNames:"zondag maandag dinsdag woensdag donderdag vrijdag zaterdag".split(" "),dayNamesShort:"zon maa din woe don vri zat".split(" "),dayNamesMin:"zo ma di wo do vr za".split(" "),weekHeader:"Wk",
dateFormat:"dd-mm-yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};k.datepicker.setDefaults(k.datepicker.regional.nl)});